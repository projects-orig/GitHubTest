
# FileName: lcm.py
# Author  : Alex
# Version : 1.0 Nov 16, 2016  Beagle Bone Black version
#  

import time
import smbus
import datetime

CMD_REG = 0x00 

#--- Initialize pins ---
bus = smbus.SMBus(1)    # 0 = /dev/i2c-0 (port I2C0), 1 = /dev/i2c-1 (port I2C1)
DEVICE_ADDRESS = 0x38      #7 bit address (will be left shifted to add the read write bit)


#--- list ---
cleanout_values = [0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,0x0, 0x0]
allout_values32 = [0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,0xff,0xff]

year_list = {'00':[0xf7,0xdf],'01':[0xf7,0x0e],'02':[0xf7,0x7b],'03':[0xf7,0x3f],'04':[0xf7,0xae],'05':[0xf7,0xb7],'06':[0xf7,0xf7],'07':[0xf7,0x8f],'08':[0xf7,0xff],'09':[0xf7,0xaf]
             ,'10':[0xc3,0xdd],'11':[0xc3,0x0c],'12':[0xc3,0x79],'13':[0xc3,0x3d],'14':[0xc3,0xac],'15':[0xc3,0xb5],'16':[0xc3,0xf5],'17':[0xc3,0x8d],'18':[0xc3,0xfd],'19':[0xc3,0xad]
             ,'20':[0xde,0xdf],'21':[0xde,0x0e],'22':[0xde,0x7b],'23':[0xde,0x3f],'24':[0xde,0xae],'25':[0xde,0xb7],'26':[0xde,0xf7],'27':[0xde,0x8f],'28':[0xde,0xff],'29':[0xde,0xaf]
             ,'30':[0xcf,0xdf],'31':[0xcf,0x0e],'32':[0xcf,0x7b],'33':[0xcf,0x3f],'34':[0xcf,0xae],'35':[0xcf,0xb7],'36':[0xcf,0xf7],'37':[0xcf,0x8f],'38':[0xcf,0xff],'39':[0xcf,0xaf]
             ,'40':[0xeb,0xdd],'41':[0xeb,0x0c],'42':[0xeb,0x79],'43':[0xeb,0x3d],'44':[0xeb,0xac],'45':[0xeb,0xb5],'46':[0xeb,0xf5],'47':[0xeb,0x8d],'48':[0xeb,0xfd],'49':[0xeb,0xad]
             ,'50':[0xed,0xdf],'51':[0xed,0x0e],'52':[0xed,0x7b],'53':[0xed,0x3f],'54':[0xed,0xae],'55':[0xed,0xb7],'56':[0xed,0xf7],'57':[0xed,0x8f],'58':[0xed,0xff],'59':[0xed,0xaf]
             ,'60':[0xfd,0xdf],'61':[0xfd,0x0e], '62':[0xfd,0x7b],'63':[0xfd,0x3f],'64':[0xfd,0xae], '65':[0xfd,0xb7],'66':[0xfd,0xf7],'67':[0xfd,0x8f], '68':[0xfd,0xff],'69':[0xfd,0xaf]
             ,'70':[0xe3,0xdf],'71':[0xe3,0x0e], '72':[0xe3,0x7b],'73':[0xe3,0x3f],'74':[0xe3,0xae], '75':[0xe3,0xb7],'76':[0xe3,0xf7],'77':[0xe3,0x8f], '78':[0xe3,0xff],'79':[0xe3,0xaf]
             ,'80':[0xff,0xdf],'81':[0xff,0x0e], '82':[0xff,0x7b],'83':[0xff,0x3f],'84':[0xff,0xae], '85':[0xff,0xb7],'86':[0xff,0xf7],'87':[0xff,0x8f], '88':[0xff,0xff],'89':[0xff,0xaf]
             ,'90':[0xeb,0xdf],'91':[0xeb,0x0e], '92':[0xeb,0x7b],'93':[0xeb,0x3f],'94':[0xeb,0xae], '95':[0xeb,0xb7],'96':[0xeb,0xf7],'97':[0xeb,0x8f], '98':[0xeb,0xff],'99':[0xeb,0xaf]}
 
weekday_list ={'Monday':[0x90], 'Tuesday':[0xa0], 'Wednesday':[0x88] , 'Thursday':[0x84] , 'Friday':[0x81] , 'Saturday':[0x82] , 'Sunday':[0xc0]}
weekday_test =['Monday','Tuesday', 'Wednesday', 'Thursday' , 'Friday', 'Saturday', 'Sunday']

day_list = {'00':[0xdf,0x7f],'01':[0xdc,0x3b], '02':[0xdd,0xef],'03':[0xdc,0xff],'04':[0xde,0xbb], '05':[0xde,0xdf],'06':[0xdf,0xdf],'07':[0xde,0x3f], '08':[0xdf,0xff],'09':[0xde,0xbf]
           ,'10':[0x0f,0x77],'11':[0x0c,0x33], '12':[0x0d,0xe7],'13':[0x0c,0xf7],'14':[0x0e,0xb3], '15':[0x0e,0xd7],'16':[0x0f,0xd7],'17':[0x0e,0x37], '18':[0x0f,0xf7],'19':[0x0e,0xb7]
           ,'20':[0x7b,0x7f],'21':[0x78,0x3b], '22':[0x79,0xef],'23':[0x78,0xff],'24':[0x7a,0xbb], '25':[0x7a,0xdf],'26':[0x7b,0xdf],'27':[0x7a,0x3f], '28':[0x7b,0xff],'29':[0x7a,0xbf]
           ,'30':[0x3f,0x7f],'31':[0x3c,0x3b],'1':[0xdc,0x3b], '2':[0xdd,0xef],'3':[0xdc,0xff],'4':[0xde,0xbb], '5':[0xde,0xdf],'6':[0xdf,0xdf],'7':[0xde,0x3f], '8':[0xdf,0xff],'9':[0xde,0xbf]}
           
month_list = {'01':[0x03],'02':[0x9e],'03':[0x8f],'04':[0x2b],'05':[0xad],'06':[0xbd],'07':[0xa3],'08':[0xbf],'09':[0xab],'10':[0xf7],'11':[0x43],'12':[0xde]
              ,'1':[0x03],'2':[0x9e],'3':[0x8f],'4':[0x2b],'5':[0xad],'6':[0xbd],'7':[0xa3],'8':[0xbf],'9':[0xab]}

hour_list = {'00':[0x8d,0xf0],'01':[0x00,0xf0],'02':[0x87,0xb0],'03':[0x83,0xf0],'04':[0x0a,0xf0],'05':[0x8b,0x70],'06':[0x8f,0x70],'07':[0x88,0xf0],'08':[0x8f,0xf0],'09':[0x8a,0xf0]
            ,'10':[0xbd,0xf0],'11':[0x30,0xf0],'12':[0xb7,0xb0],'13':[0xb3,0xf0],'14':[0x3a,0xf0],'15':[0xbb,0x70],'16':[0xbf,0x70],'17':[0xb8,0xf0],'18':[0xbf,0xf0],'19':[0xba,0xf0]
            ,'20':[0xed,0xf0],'21':[0x60,0xf0],'22':[0xe7,0xb0],'23':[0xe3,0xf0],'24':[0x6a,0xf0]
            ,'0':[0x8d,0xf0],'1':[0x00,0xf0],'2':[0x87,0xb0],'3':[0x83,0xf0],'4':[0x0a,0xf0],'5':[0x8b,0x70],'6':[0x8f,0x70],'7':[0x88,0xf0],'8':[0x8f,0xf0],'9':[0x8a,0xf0]}

hour_list_ = {'00':[0x8d,0xe0],'01':[0x00,0xe0],'02':[0x87,0xa0],'03':[0x83,0xe0],'04':[0x0a,0xe0],'05':[0x8b,0x60],'06':[0x8f,0x60],'07':[0x88,0xe0],'08':[0x8f,0xe0],'09':[0x8a,0xe0]
             ,'10':[0xbd,0xe0],'11':[0x30,0xe0],'12':[0xb7,0xa0],'13':[0xb3,0xe0],'14':[0x3a,0xe0],'15':[0xbb,0x60],'16':[0xbf,0x60],'17':[0xb8,0xe0],'18':[0xbf,0xe0],'19':[0xba,0xe0]
             ,'20':[0xed,0xe0],'21':[0x60,0xe0],'22':[0xe7,0xa0],'23':[0xe3,0xe0],'24':[0x6a,0xe0]
             ,'0':[0x8d,0xe0],'1':[0x00,0xe0],'2':[0x87,0xa0],'3':[0x83,0xe0],'4':[0x0a,0xe0],'5':[0x8b,0x60],'6':[0x8f,0x60],'7':[0x88,0xe0],'8':[0x8f,0xe0],'9':[0x8a,0xe0]}


minute_list = {'00':[0xf7,0xdf],'01':[0xf7,0x0e], '02':[0xf7,0x7b],'03':[0xf7,0x3f],'04':[0xf7,0xae], '05':[0xf7,0xb7],'06':[0xf7,0xf7],'07':[0xf7,0x8f], '08':[0xf7,0xff],'09':[0xf7,0xaf]
              ,'10':[0xc3,0xdd],'11':[0xc3,0x0c], '12':[0xc3,0x79],'13':[0xc3,0x3d],'14':[0xc3,0xac], '15':[0xc3,0xb5],'16':[0xc3,0xf5],'17':[0xc3,0x8d], '18':[0xc3,0xfd],'19':[0xc3,0xad]
              ,'20':[0xde,0xdf],'21':[0xde,0x0e], '22':[0xde,0x7b],'23':[0xde,0x3f],'24':[0xde,0xae], '25':[0xde,0xb7],'26':[0xde,0xf7],'27':[0xde,0x8f], '28':[0xde,0xff],'29':[0xde,0xaf]
              ,'30':[0xcf,0xdf],'31':[0xcf,0x0e], '32':[0xcf,0x7b],'33':[0xcf,0x3f],'34':[0xcf,0xae], '35':[0xcf,0xb7],'36':[0xcf,0xf7],'37':[0xcf,0x8f], '38':[0xcf,0xff],'39':[0xcf,0xaf]
              ,'40':[0xeb,0xdd],'41':[0xeb,0x0c], '42':[0xeb,0x79],'43':[0xeb,0x3d],'44':[0xeb,0xac], '45':[0xeb,0xb5],'46':[0xeb,0xf5],'47':[0xeb,0x8d], '48':[0xeb,0xfd],'49':[0xeb,0xad]
              ,'50':[0xed,0xdf],'51':[0xed,0x0e], '52':[0xed,0x7b],'53':[0xed,0x3f],'54':[0xed,0xae], '55':[0xed,0xb7],'56':[0xed,0xf7],'57':[0xed,0x8f], '58':[0xed,0xff],'59':[0xed,0xaf]
              ,'60':[0xfd,0xdf],'0':[0xf7,0xdf],'1':[0xf7,0x0e], '2':[0xf7,0x7b],'3':[0xf7,0x3f],'4':[0xf7,0xae], '5':[0xf7,0xb7],'6':[0xf7,0xf7],'7':[0xf7,0x8f], '8':[0xf7,0xff],'9':[0xf7,0xaf]}

minute_list_ = {'00':[0xb7,0xdf],'01':[0xb7,0x0e], '02':[0xb7,0x7b],'03':[0xb7,0x3f],'04':[0xb7,0xae], '05':[0xb7,0xb7],'06':[0xb7,0xf7],'07':[0xb7,0x8f], '08':[0xb7,0xff],'09':[0xb7,0xaf]
              ,'10':[0x83,0xdd],'11':[0x83,0x0c], '12':[0x83,0x79],'13':[0x83,0x3d],'14':[0x83,0xac], '15':[0x83,0xb5],'16':[0x83,0xf5],'17':[0x83,0x8d], '18':[0x83,0xfd],'19':[0x83,0xad]
              ,'20':[0x9e,0xdf],'21':[0x9e,0x0e], '22':[0x9e,0x7b],'23':[0x9e,0x3f],'24':[0x9e,0xae], '25':[0x9e,0xb7],'26':[0x9e,0xf7],'27':[0x9e,0x8f], '28':[0x9e,0xff],'29':[0x9e,0xaf]
              ,'30':[0x8f,0xdf],'31':[0x8f,0x0e], '32':[0x8f,0x7b],'33':[0x8f,0x3f],'34':[0x8f,0xae], '35':[0x8f,0xb7],'36':[0x8f,0xf7],'37':[0x8f,0x8f], '38':[0x8f,0xff],'39':[0x8f,0xaf]
              ,'40':[0xab,0xdd],'41':[0xab,0x0c], '42':[0xab,0x79],'43':[0xab,0x3d],'44':[0xab,0xac], '45':[0xab,0xb5],'46':[0xab,0xf5],'47':[0xab,0x8d], '48':[0xab,0xfd],'49':[0xab,0xad]
              ,'50':[0xad,0xdf],'51':[0xad,0x0e], '52':[0xad,0x7b],'53':[0xad,0x3f],'54':[0xad,0xae], '55':[0xad,0xb7],'56':[0xad,0xf7],'57':[0xad,0x8f], '58':[0xad,0xff],'59':[0xad,0xaf]
              ,'60':[0xbd,0xdf],'0':[0xb7,0xdf],'1':[0xb7,0x0e], '2':[0xb7,0x7b],'3':[0xb7,0x3f],'4':[0xb7,0xae], '5':[0xb7,0xb7],'6':[0xb7,0xf7],'7':[0xb7,0x8f], '8':[0xb7,0xff],'9':[0xb7,0xaf]}


circuit_status1011 = {'00':[0xf7,0xdf],'01':[0xf7,0x0e], '02':[0xf7,0x7b],'03':[0xf7,0x3f],'04':[0xf7,0xae], '05':[0xf7,0xb7],'06':[0xf7,0xf7],'07':[0xf7,0x8f], '08':[0xf7,0xff],'09':[0xf7,0xaf]
                     ,'10':[0xc3,0xdd],'11':[0xc3,0x0c], '12':[0xc3,0x79],'13':[0xc3,0x3d],'14':[0xc3,0xac], '15':[0xc3,0xb5],'16':[0xc3,0xf5],'17':[0xc3,0x8d], '18':[0xc3,0xfd],'19':[0xc3,0xad]
                     ,'20':[0xde,0xdf],'21':[0xde,0x0e], '22':[0xde,0x7b],'23':[0xde,0x3f],'24':[0xde,0xae], '25':[0xde,0xb7],'26':[0xde,0xf7],'27':[0xde,0x8f], '28':[0xde,0xff],'29':[0xde,0xaf]
                     ,'30':[0xcf,0xdf],'31':[0xcf,0x0e], '32':[0xcf,0x7b],'33':[0xcf,0x3f],'34':[0xcf,0xae], '35':[0xcf,0xb7],'36':[0xcf,0xf7],'37':[0xcf,0x8f], '38':[0xcf,0xff],'39':[0xcf,0xaf]
                     ,'40':[0xeb,0xdd],'41':[0xeb,0x0c], '42':[0xeb,0x79],'43':[0xeb,0x3d],'44':[0xeb,0xac], '45':[0xeb,0xb5],'46':[0xeb,0xf5],'47':[0xeb,0x8d], '48':[0xeb,0xfd],'49':[0xeb,0xad]
                     ,'50':[0xed,0xdf],'51':[0xed,0x0e], '52':[0xed,0x7b],'53':[0xed,0x3f],'54':[0xed,0xae], '55':[0xed,0xb7],'56':[0xed,0xf7],'57':[0xed,0x8f], '58':[0xed,0xff],'59':[0xed,0xaf]
                     ,'60':[0xfd,0xdf],'61':[0xfd,0x0e], '62':[0xfd,0x7b],'63':[0xfd,0x3f],'64':[0xfd,0xae], '65':[0xfd,0xb7],'66':[0xfd,0xf7],'67':[0xfd,0x8f], '68':[0xfd,0xff],'69':[0xfd,0xaf]
                     ,'70':[0xe3,0xdf],'71':[0xe3,0x0e], '72':[0xe3,0x7b],'73':[0xe3,0x3f],'74':[0xe3,0xae], '75':[0xe3,0xb7],'76':[0xe3,0xf7],'77':[0xe3,0x8f], '78':[0xe3,0xff],'79':[0xe3,0xaf]
                     ,'80':[0xff,0xdf],'81':[0xff,0x0e], '82':[0xff,0x7b],'83':[0xff,0x3f],'84':[0xff,0xae], '85':[0xff,0xb7],'86':[0xff,0xf7],'87':[0xff,0x8f], '88':[0xff,0xff],'89':[0xff,0xaf]
                     ,'90':[0xeb,0xdf],'91':[0xeb,0x0e], '92':[0xeb,0x7b],'93':[0xeb,0x3f],'94':[0xeb,0xae], '95':[0xeb,0xb7],'96':[0xeb,0xf7],'97':[0xeb,0x8f], '98':[0xeb,0xff],'99':[0xeb,0xaf]
                     ,'0':[0xf7,0xdf],'1':[0xf7,0x0e], '2':[0xf7,0x7b],'3':[0xf7,0x3f],'4':[0xf7,0xae], '5':[0xf7,0xb7],'6':[0xf7,0xf7],'7':[0xf7,0x8f], '8':[0xf7,0xff],'9':[0xf7,0xaf]}  

circuit_status2627 = {'00':[0xdf,0x7c],'01':[0xdc,0x38], '02':[0xdd,0xec],'03':[0xdc,0xfc],'04':[0xde,0xb8], '05':[0xde,0xdc],'06':[0xdf,0xdc],'07':[0xde,0x3c], '08':[0xdf,0xfc],'09':[0xde,0xbc]
                     ,'10':[0x0f,0x74],'11':[0x0c,0x30], '12':[0x0d,0xe4],'13':[0x0c,0xf4],'14':[0x0e,0xb0], '15':[0x0e,0xd4],'16':[0x0f,0xd4],'17':[0x0e,0x34], '18':[0x0f,0xf4],'19':[0x0e,0xb4]
                     ,'20':[0x7b,0x7c],'21':[0x78,0x38], '22':[0x79,0xec],'23':[0x78,0xfc],'24':[0x7a,0xb8], '25':[0x7a,0xdc],'26':[0x7b,0xdc],'27':[0x7a,0x3c], '28':[0x7b,0xfc],'29':[0x7a,0xbc]
                     ,'30':[0x3f,0x7c],'31':[0x3c,0x38], '32':[0x3d,0xec],'33':[0x3c,0xfc],'34':[0x3e,0xb8], '35':[0x3e,0xdc],'36':[0x3f,0xdc],'37':[0x3e,0x3c], '38':[0x3f,0xfc],'39':[0x3e,0xbc]
                     ,'40':[0xaf,0x74],'41':[0xac,0x30], '42':[0xad,0xe4],'43':[0xac,0xf4],'44':[0xae,0xb0], '45':[0xae,0xd4],'46':[0xaf,0xd4],'47':[0xae,0x34], '48':[0xaf,0xf4],'49':[0xae,0xb4]
                     ,'50':[0xbf,0x7c],'51':[0xb4,0x38], '52':[0xb5,0xec],'53':[0xb4,0xfc],'54':[0xb6,0xb8], '55':[0xb6,0xdc],'56':[0xb7,0xdc],'57':[0xb6,0x3c], '58':[0xb7,0xfc],'59':[0xb6,0xbc]
                     ,'60':[0xf7,0x7c],'61':[0xf4,0x38], '62':[0xf5,0xec],'63':[0xf4,0xfc],'64':[0xf6,0xb8], '65':[0xf6,0xdc],'66':[0xf7,0xdc],'67':[0xf6,0x3c], '68':[0xf7,0xfc],'69':[0xf6,0xbc]
                     ,'70':[0x8f,0x7c],'71':[0x8c,0x38], '72':[0x8d,0xec],'73':[0x8c,0xfc],'74':[0x8e,0xb8], '75':[0x8e,0xdc],'76':[0x8f,0xdc],'77':[0x8e,0x3c], '78':[0x8f,0xfc],'79':[0x8e,0xbc]
                     ,'80':[0xff,0x7c],'81':[0xfc,0x38], '82':[0xfd,0xec],'83':[0xfc,0xfc],'84':[0xfe,0xb8], '85':[0xfe,0xdc],'86':[0xff,0xdc],'87':[0xfe,0x3c], '88':[0xff,0xfc],'89':[0xfe,0xbc]
                     ,'90':[0xaf,0x7c],'91':[0xac,0x38], '92':[0xad,0xec],'93':[0xac,0xfc],'94':[0xae,0xb8], '95':[0xae,0xdc],'96':[0xaf,0xdc],'97':[0xae,0x3c], '98':[0xaf,0xfc],'99':[0xae,0xbc]
                     ,'0':[0xdf,0x7c],'1':[0xdc,0x38], '2':[0xdd,0xec],'3':[0xdc,0xfc],'4':[0xde,0xb8], '5':[0xde,0xdc],'6':[0xdf,0xdc],'7':[0xde,0x3c], '8':[0xdf,0xfc],'9':[0xde,0xbc]}  

temperature_list =  {'00':[0xdf,0x7f],'01':[0xdc,0x3b], '02':[0xdd,0xef],'03':[0xdc,0xff],'04':[0xde,0xbb], '05':[0xde,0xdf],'06':[0xdf,0xdf],'07':[0xde,0x3f], '08':[0xdf,0xff],'09':[0xde,0xbf]
                     ,'10':[0x0f,0x77],'11':[0x0c,0x33], '12':[0x0d,0xe7],'13':[0x0c,0xf7],'14':[0x0e,0xb3], '15':[0x0e,0xd7],'16':[0x0f,0xd7],'17':[0x0e,0x37], '18':[0x0f,0xf7],'19':[0x0e,0xb7]
                     ,'20':[0x7b,0x7f],'21':[0x78,0x3b], '22':[0x79,0xef],'23':[0x78,0xff],'24':[0x7a,0xbb], '25':[0x7a,0xdf],'26':[0x7b,0xdf],'27':[0x7a,0x3f], '28':[0x7b,0xff],'29':[0x7a,0xbf]
                     ,'30':[0x3f,0x7f],'31':[0x3c,0x3b], '32':[0x3d,0xef],'33':[0x3c,0xff],'34':[0x3e,0xbb], '35':[0x3e,0xdf],'36':[0x3f,0xdf],'37':[0x3e,0x3f], '38':[0x3f,0xff],'39':[0x3e,0xbf]
                     ,'40':[0xaf,0x77],'41':[0xac,0x33], '42':[0xad,0xe7],'43':[0xac,0xf7],'44':[0xae,0xb3], '45':[0xae,0xd7],'46':[0xaf,0xd7],'47':[0xae,0x37], '48':[0xaf,0xf7],'49':[0xae,0xb7]
                     ,'50':[0xbf,0x7f],'51':[0xb4,0x3b], '52':[0xb5,0xef],'53':[0xb4,0xff],'54':[0xb6,0xbb], '55':[0xb6,0xdf],'56':[0xb7,0xdf],'57':[0xb6,0x3f], '58':[0xb7,0xff],'59':[0xb6,0xbf]
                     ,'60':[0xf7,0x7f],'61':[0xf4,0x3b], '62':[0xf5,0xef],'63':[0xf4,0xff],'64':[0xf6,0xbb], '65':[0xf6,0xdf],'66':[0xf7,0xdf],'67':[0xf6,0x3f], '68':[0xf7,0xff],'69':[0xf6,0xbf]
                     ,'70':[0x8f,0x7f],'71':[0x8c,0x3b], '72':[0x8d,0xef],'73':[0x8c,0xff],'74':[0x8e,0xbb], '75':[0x8e,0xdf],'76':[0x8f,0xdf],'77':[0x8e,0x3f], '78':[0x8f,0xff],'79':[0x8e,0xbf]
                     ,'80':[0xff,0x7f],'81':[0xfc,0x3b], '82':[0xfd,0xef],'83':[0xfc,0xff],'84':[0xfe,0xbb], '85':[0xfe,0xdf],'86':[0xff,0xdf],'87':[0xfe,0x3f], '88':[0xff,0xff],'89':[0xfe,0xbf]
                     ,'90':[0xaf,0x7f],'91':[0xac,0x3b], '92':[0xad,0xef],'93':[0xac,0xff],'94':[0xae,0xbb], '95':[0xae,0xdf],'96':[0xaf,0xdf],'97':[0xae,0x3f], '98':[0xaf,0xff],'99':[0xae,0xbf]
                     ,'0':[0xdf,0x7f],'1':[0xdc,0x3b], '2':[0xdd,0xef],'3':[0xdc,0xff],'4':[0xde,0xbb], '5':[0xde,0xdf],'6':[0xdf,0xdf],'7':[0xde,0x3f], '8':[0xdf,0xff],'9':[0xde,0xbf]
                     ,'-1':[0x20,0x33], '-2':[0x21,0xe7],'-3':[0x20,0xf7],'-4':[0x22,0xb3], '-5':[0x22,0xd7],'-6':[0x23,0xd7],'-7':[0x22,0x37], '-8':[0x23,0xf7],'-9':[0x22,0xb7]
                     ,'100':[0x20,0x33], '101':[0x21,0xe7],'102':[0x20,0xf7],'103':[0x22,0xb3], '104':[0x22,0xd7],'105':[0x23,0xd7],'106':[0x22,0x37], '107':[0x23,0xf7],'108':[0x22,0xb7]}  

disaster_list = {'000':[0x20],'001':[0x60],'010':[0xa0],'100':[0x30],'110':[0xb0],'011':[0xe0],'101':[0x70],'111':[0xf0]}               

#--- define ---
seg_circuit_status1 = 18
seg_circuit_status2 = 26
seg_circuit_status3 = 33
seg_circuit_status4 = 40
seg_circuit_status5 = 47
seg_circuit_status6 = 54
seg_circuit_status7 = 61
seg_circuit_status8 = 68    
seg_circuit_status9 = 75
seg_circuit_status10 = 82
seg_circuit_status11 = 89
seg_circuit_status12 = 96
seg_circuit_status13 = 103
seg_circuit_status14 = 110
seg_circuit_status15 = 117
seg_circuit_status16 = 124
seg_disaster = 131
seg_temperature = 133


#--- Send cmd to LCM ---
def lcm_send_cmd (cmd):
  bus.write_byte(DEVICE_ADDRESS,cmd)

#--- Send data to LCM ---
def lcm_send_data (reg,data):
   bus.write_byte_data(DEVICE_ADDRESS,reg,data)

#--- Send data list to LCM ---
def lcm_send_data_list (reg,data):
    bus.write_i2c_block_data(DEVICE_ADDRESS,reg,data)

       
#--- Init LCM ---   
def lcm_init ():
    lcm_send_cmd(0x70); 
    lcm_send_cmd(0xFE);     #MISCELLANEOUS
    lcm_send_cmd(0x80);     #POINTER(1)[5:0]
    lcm_send_cmd(0xC0);     #POINTER(2)[7:6]
    lcm_send_cmd(0xD7);     #DCK DIVIDE
    lcm_send_cmd(0xE0);     #DEVICE SELECT
    lcm_send_cmd(0xE8);     #DISPLAY CONTROL
    lcm_send_cmd(0xF0);     #POWER CONTROL
    lcm_send_cmd(0x78);     #BANK SELECT

#--- Init1 LCM ---
def lcm_init1 (addr):
    dp5_0 = addr % 64;
    dp7_6 = addr / 64;    
    lcm_send_cmd(0x70); 
    lcm_send_cmd(0xFE);     #MISCELLANEOUS
    p1=0x80+dp5_0;   
    lcm_send_cmd(int(p1));     #POINTER(1)[5:0]
    p2=0xC0+dp7_6;    
    lcm_send_cmd(int(p2));     #POINTER(2)[7:6]
    lcm_send_cmd(0xD7);     #DCK DIVIDE
    lcm_send_cmd(0xE0);     #DEVICE SELECT
    lcm_send_cmd(0xE8);     #DISPLAY CONTROL
    lcm_send_cmd(0xF0);     #POWER CONTROL
    lcm_send_cmd(0x78);     #BANK SELECT
    
#--- Clean LCM ---     
def lcm_clear ():
    lcm_init()    
    lcm_send_data_list(0x00,cleanout_values)
    lcm_send_data_list(0x10,cleanout_values)
    lcm_send_data_list(0x1f,cleanout_values)

#--- Show all LCM ---     
def lcm_all():
    lcm_init()    
    lcm_send_data_list(0x00,allout_values32)
    lcm_send_data_list(0x10,allout_values32)
    lcm_send_data_list(0x1f,allout_values32)   

#--- Move to SEG ---     
def lcm_to_seg(seg,data):
    dp = int((seg % 64))   
    lcm_init1(seg)     
    lcm_send_data_list(dp-1,data)

#--- Show Circuit 1 ---     
def lcm_circuit1(ct):
    if int(ct)>99:       
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct[0]]) #1011
      time.sleep(0.5)       
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct[1:]]) #1011

#--- Show Circuit 2 (ct > 99) ---     
def lcm_circuit2(ct1,ct2,ct3,ct4,ct5,ct6,ct7,ct8,ct9,ct10,ct11,ct12,ct13,ct14,ct15,ct16):
  try: 
    if int(ct1)>99:       
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct1[0]])   #1011
    else:
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct1])   #1011 
  except:
    pass
      
  try:
    if int(ct2)>99:   
      lcm_to_seg(seg_circuit_status2,circuit_status2627[ct2[0]])   #2627 
    else:     
      lcm_to_seg(seg_circuit_status2,circuit_status2627[ct2])   #2627 
  except:
    pass
  
  try:
    if int(ct3)>99:   
      lcm_to_seg(seg_circuit_status3,circuit_status2627[ct3[0]])   #1213 
    else:
      lcm_to_seg(seg_circuit_status3,circuit_status2627[ct3])   #1213  
  except:
    pass
  
  try:
    if int(ct4)>99:      
      lcm_to_seg(seg_circuit_status4,circuit_status2627[ct4[0]])   #2829
    else:
      lcm_to_seg(seg_circuit_status4,circuit_status2627[ct4])   #2829  
  except:
    pass
  
  try:
    if int(ct5)>99:     
      lcm_to_seg(seg_circuit_status5,circuit_status2627[ct5[0]])   #1415
    else:
      lcm_to_seg(seg_circuit_status5,circuit_status2627[ct5])   #1415
  except:
    pass
  
  try:
    if int(ct6)>99:  
      lcm_to_seg(seg_circuit_status6,circuit_status2627[ct6[0]])   #3031
    else:   
      lcm_to_seg(seg_circuit_status6,circuit_status2627[ct6])   #3031
  except:
    pass
  
  try:
    if int(ct7)>99: 
      lcm_to_seg(seg_circuit_status7,circuit_status2627[ct7[0]])   #1617 
    else:
      lcm_to_seg(seg_circuit_status7,circuit_status2627[ct7])   #1617 
  except:
    pass
  
  try:
    if int(ct8)>99:   
      lcm_to_seg(seg_circuit_status8,circuit_status2627[ct8[0]])   #3233
    else:
      lcm_to_seg(seg_circuit_status8,circuit_status2627[ct8])   #3233
  except:
    pass
  
  try:
    if int(ct9)>99:   
      lcm_to_seg(seg_circuit_status9,circuit_status2627[ct9[0]])   #1819
    else:
      lcm_to_seg(seg_circuit_status9,circuit_status2627[ct9])   #1819
  except:
    pass
  
  try:
    if int(ct10)>99:   
      lcm_to_seg(seg_circuit_status10,circuit_status2627[ct10[0]])   #3435
    else:
      lcm_to_seg(seg_circuit_status10,circuit_status2627[ct10])   #3435
  except:
    pass
  
  try:
    if int(ct11)>99:   
      lcm_to_seg(seg_circuit_status11,circuit_status2627[ct11[0]])   #2021
    else:
      lcm_to_seg(seg_circuit_status11,circuit_status2627[ct11])   #2021
  except:
    pass
  
  try:
    if int(ct12)>99:  
      lcm_to_seg(seg_circuit_status12,circuit_status2627[ct12[0]])   #3637
    else:
      lcm_to_seg(seg_circuit_status12,circuit_status2627[ct12])   #3637
  except:
    pass
  
  try:
    if int(ct13)>99:  
      lcm_to_seg(seg_circuit_status13,circuit_status2627[ct13[0]])   #2223
    else:
      lcm_to_seg(seg_circuit_status13,circuit_status2627[ct13])   #2223
  except:
    pass
  
  try:
    if int(ct14)>99:
      lcm_to_seg(seg_circuit_status14,circuit_status2627[ct14[0]])   #3839
    else:
      lcm_to_seg(seg_circuit_status14,circuit_status2627[ct14])   #3839
  except:
    pass
  
  try:
    if int(ct15)>99:
      lcm_to_seg(seg_circuit_status15,circuit_status2627[ct15[0]])   #2425
    else:
      lcm_to_seg(seg_circuit_status15,circuit_status2627[ct15])   #2425
  except:
    pass
  
  try:
    if int(ct16)>99:  
      lcm_to_seg(seg_circuit_status16,circuit_status2627[ct16[0]])   #4041
    else:
      lcm_to_seg(seg_circuit_status16,circuit_status2627[ct16])   #4041
   
  except:
    pass
  
  time.sleep(0.5)
    
  try:
    if int(ct1)>99:       
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct1[1:]])   #1011
    else:
      lcm_to_seg(seg_circuit_status1,circuit_status1011[ct1])   #1011 
  except:
    pass
  
  try:
    if int(ct2)>99:   
      lcm_to_seg(seg_circuit_status2,circuit_status2627[ct2[1:]])   #2627 
    else:     
      lcm_to_seg(seg_circuit_status2,circuit_status2627[ct2])   #2627 
  except:
    pass
  
  try:
    if int(ct3)>99:   
      lcm_to_seg(seg_circuit_status3,circuit_status2627[ct3[1:]])   #1213 
    else:
      lcm_to_seg(seg_circuit_status3,circuit_status2627[ct3])   #1213  
  except:
    pass
  
  try:
    if int(ct4)>99:      
      lcm_to_seg(seg_circuit_status4,circuit_status2627[ct4[1:]])   #2829
    else:
      lcm_to_seg(seg_circuit_status4,circuit_status2627[ct4])   #2829  
  except:
    pass
  
  try:
    if int(ct5)>99:     
      lcm_to_seg(seg_circuit_status5,circuit_status2627[ct5[1:]])   #1415
    else:
      lcm_to_seg(seg_circuit_status5,circuit_status2627[ct5])   #1415
  except:
    pass
  
  try:
    if int(ct6)>99:  
      lcm_to_seg(seg_circuit_status6,circuit_status2627[ct6[1:]])   #3031
    else:   
      lcm_to_seg(seg_circuit_status6,circuit_status2627[ct6])   #3031
  except:
    pass
  
  try:
    if int(ct7)>99: 
      lcm_to_seg(seg_circuit_status7,circuit_status2627[ct7[1:]])   #1617 
    else:
      lcm_to_seg(seg_circuit_status7,circuit_status2627[ct7])   #1617 
  except:
    pass
  
  try:
    if int(ct8)>99:   
      lcm_to_seg(seg_circuit_status8,circuit_status2627[ct8[1:]])   #3233
    else:
      lcm_to_seg(seg_circuit_status8,circuit_status2627[ct8])   #3233
  except:
    pass
  
  try:
    if int(ct9)>99:   
      lcm_to_seg(seg_circuit_status9,circuit_status2627[ct9[1:]])   #1819
    else:
      lcm_to_seg(seg_circuit_status9,circuit_status2627[ct9])   #1819
  except:
    pass
  
  try:
    if int(ct10)>99:   
      lcm_to_seg(seg_circuit_status10,circuit_status2627[ct10[1:]])   #3435
    else:
      lcm_to_seg(seg_circuit_status10,circuit_status2627[ct10])   #3435
  except:
    pass
  
  try:
    if int(ct11)>99:   
      lcm_to_seg(seg_circuit_status11,circuit_status2627[ct11[1:]])   #2021
    else:
      lcm_to_seg(seg_circuit_status11,circuit_status2627[ct11])   #2021
  except:
    pass
  
  try:
    if int(ct12)>99:  
      lcm_to_seg(seg_circuit_status12,circuit_status2627[ct12[1:]])   #3637
    else:
      lcm_to_seg(seg_circuit_status12,circuit_status2627[ct12])   #3637
  except:
    pass
  
  try:
    if int(ct13)>99:  
      lcm_to_seg(seg_circuit_status13,circuit_status2627[ct13[1:]])   #2223
    else:
      lcm_to_seg(seg_circuit_status13,circuit_status2627[ct13])   #2223
  except:
    pass
  
  try:
    if int(ct14)>99:
      lcm_to_seg(seg_circuit_status14,circuit_status2627[ct14[1:]])   #3839
    else:
      lcm_to_seg(seg_circuit_status14,circuit_status2627[ct14])   #3839
  except:
    pass
  
  try:
    if int(ct15)>99:
      lcm_to_seg(seg_circuit_status15,circuit_status2627[ct15[1:]])   #2425
    else:
      lcm_to_seg(seg_circuit_status15,circuit_status2627[ct15])   #2425
  except:
    pass
  
  try:
    if int(ct16)>99:  
      lcm_to_seg(seg_circuit_status16,circuit_status2627[ct16[1:]])   #4041
    else:
      lcm_to_seg(seg_circuit_status16,circuit_status2627[ct16])   #4041
  except:
    pass

def lcm_disaster(dr):
  lcm_to_seg(seg_disaster,disaster_list[dr]) 


def lcm_temperature(te):
  lcm_to_seg(seg_temperature,temperature_list[te])
          

  
#--- Flash disaster & temperature---     
def lcm_disaster_temperature(dr,te):
  lcm_to_seg(seg_disaster,disaster_list[dr]) 
  lcm_to_seg(seg_temperature,temperature_list[te])
  time.sleep(0.5)       
  lcm_to_seg(seg_disaster,disaster_list['000'])
  lcm_to_seg(seg_temperature,temperature_list[te]) 
      

#--- Show Circuit ---     
def lcm_circuit(ct1,ct2,ct3,ct4,ct5,ct6,ct7,ct8,ct9,ct10,ct11,ct12,ct13,ct14,ct15,ct16,dr,te):
    #circuit status
    lcm_to_seg(seg_circuit_status1,circuit_status1011[ct1])   #1011    
    lcm_to_seg(seg_circuit_status2,circuit_status2627[ct2])   #2627    
    lcm_to_seg(seg_circuit_status3,circuit_status2627[ct3])   #1213       
    lcm_to_seg(seg_circuit_status4,circuit_status2627[ct4])   #2829
    lcm_to_seg(seg_circuit_status5,circuit_status2627[ct5])   #1415
    lcm_to_seg(seg_circuit_status6,circuit_status2627[ct6])   #3031
    lcm_to_seg(seg_circuit_status7,circuit_status2627[ct7])   #1617 
    lcm_to_seg(seg_circuit_status8,circuit_status2627[ct8])   #3233
    lcm_to_seg(seg_circuit_status9,circuit_status2627[ct9])   #1819
    lcm_to_seg(seg_circuit_status10,circuit_status2627[ct10])   #3435
    lcm_to_seg(seg_circuit_status11,circuit_status2627[ct11])   #2021
    lcm_to_seg(seg_circuit_status12,circuit_status2627[ct12])   #3637
    lcm_to_seg(seg_circuit_status13,circuit_status2627[ct13])   #2223
    lcm_to_seg(seg_circuit_status14,circuit_status2627[ct14])   #3839
    lcm_to_seg(seg_circuit_status15,circuit_status2627[ct15])   #2425
    lcm_to_seg(seg_circuit_status16,circuit_status2627[ct16])   #4041
    
    #disaster situation
    lcm_to_seg(seg_disaster,disaster_list[dr])  
    
    #temperature
    lcm_to_seg(seg_temperature,temperature_list[te])  
    
    
#--- Show Date ---   
#col_  = 0
"""      
    #flash col
  
    if col_==1: 
       lcm_init()
       lcm_send_data_list(0x00,hour_list[hour_val])
       lcm_to_seg(6,minute_list[minute_val]) 
       flash=0
    else:        
       lcm_init()
       lcm_send_data_list(0x00,hour_list_[hour_val])
       lcm_to_seg(6,minute_list_[minute_val]) 
       flash=1
    col_=flash   
"""

def lcm_date():
    #global col_
    curr_date = datetime.datetime.now()    
    
    #hour
    curr_hour=curr_date.hour;
    if curr_hour % 24:
       hour_val=str(curr_hour % 24)
    elif curr_hour==24:
       hour_val='0'
    else:
       hour_val=str(curr_hour)
    lcm_init()
    lcm_send_data_list(0x00,hour_list[hour_val]) 
          
    #minute  
    minute_val=str(curr_date.minute)
    lcm_to_seg(6,minute_list[minute_val])
        
    #weekday
    lcm_to_seg(14,weekday_list[time.strftime("%A")])    
             
    #month
    lcm_to_seg(140,[0xc0])
    month_val=str(curr_date.month)     
    lcm_to_seg(141,month_list[month_val])     
    
    #day
    day_val=str(curr_date.day)    
    lcm_to_seg(145,day_list[day_val])    
       
    #year   
    year_val=str(curr_date.year)
    lcm_to_seg(152,year_list[year_val[2:]])

        